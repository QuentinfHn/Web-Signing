<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>LED Control</title>
<style>
body { font-family: sans-serif; padding: 20px; background:#222; color:#fff; }
h1 { margin-bottom: 20px; }
h2 { margin-top: 30px; }
.radio-group { margin-bottom: 15px; }
label { margin-right: 15px; cursor: pointer; }
button { padding: 10px 20px; margin: 5px; cursor:pointer; }
</style>
</head>
<body>

<h1>LED Control</h1>

<!-- Aanloopschermen -->
<h2>Aanloopschermen</h2>
<div id="aanloopschermen-container"></div>

<!-- Platielstraat presets -->
<h2>Platielstraat Presets</h2>
<div id="platielstraat-buttons"></div>

<!-- Koestraat presets -->
<h2>Koestraat Presets</h2>
<div id="koestraat-buttons"></div>

<script>
const socket = new WebSocket("ws://localhost:8080");

// ===============================
// HELPER FUNCTIES
// ===============================
function setImage(screen, src) {
  socket.send(JSON.stringify({ type:'setImage', screen, src }));
}

function createRadio(screenId, labelText, value) {
  const label = document.createElement("label");
  const radio = document.createElement("input");
  radio.type = "radio";
  radio.name = screenId;
  radio.value = value;
  radio.addEventListener("change", () => {
    if (radio.checked) setImage(screenId, value);
  });
  label.appendChild(radio);
  label.appendChild(document.createTextNode(" " + labelText));
  return label;
}

// ===============================
// AANLOOPSCHERM RADIO BUTTONS
// ===============================
const aanloopScreens = ["aanloopscherm1","aanloopscherm2","aanloopscherm3","aanloopscherm4","aanloopscherm5","aanloopscherm6","aanloopscherm7","EHBO"];

const scenarioFiles = {
  "aanloopscherm1": { "Test": "/content/aanloopscherm1/aanloopscherm1.png", "Scene 1": "/content/aanloopscherm1/scene1.png", "Scene 2": "/content/aanloopscherm1/scene2.png", "Scene 3": "/content/aanloopscherm1/scene3.png" },
  "aanloopscherm2": { "Test": "/content/aanloopscherm2/aanloopscherm2.png", "Scene 1": "/content/aanloopscherm2/scene1.png", "Scene 2": "/content/aanloopscherm2/scene2.png", "Scene 3": "/content/aanloopscherm2/scene3.png" },
  "aanloopscherm3": { "Test": "/content/aanloopscherm3/aanloopscherm3.png", "Scene 1": "/content/aanloopscherm3/scene1.png", "Scene 2": "/content/aanloopscherm3/scene2.png", "Scene 3": "/content/aanloopscherm3/scene3.png" },
  "aanloopscherm4": { "Test": "/content/aanloopscherm4/aanloopscherm4.png", "Scene 1": "/content/aanloopscherm4/scene1.png", "Scene 2": "/content/aanloopscherm4/scene2.png", "Scene 3": "/content/aanloopscherm4/scene3.png" },
  "aanloopscherm5": { "Test": "/content/aanloopscherm5/aanloopscherm5.png", "Scene 1": "/content/aanloopscherm5/scene1.png", "Scene 2": "/content/aanloopscherm5/scene2.png", "Scene 3": "/content/aanloopscherm5/scene3.png" },
  "aanloopscherm6": { "Test": "/content/aanloopscherm6/aanloopscherm6.png", "Scene 1": "/content/aanloopscherm6/scene1.png", "Scene 2": "/content/aanloopscherm6/scene2.png", "Scene 3": "/content/aanloopscherm6/scene3.png" },
  "aanloopscherm7": { "Test": "/content/aanloopscherm7/aanloopscherm7.png", "Scene 1": "/content/aanloopscherm7/scene1.png", "Scene 2": "/content/aanloopscherm7/scene2.png", "Scene 3": "/content/aanloopscherm7/scene3.png" },
  "EHBO": { "Test": "/content/EHBO/EHBO.png", "Scene 1": "/content/EHBO/scene1.png", "Scene 2": "/content/EHBO/scene2.png", "Scene 3": "/content/EHBO/scene3.png" }
};

const aanloopContainer = document.getElementById("aanloopschermen-container");
aanloopScreens.forEach(screenId => {
  const div = document.createElement("div");
  div.className = "radio-group";
  const h3 = document.createElement("h3");
  h3.textContent = screenId;
  div.appendChild(h3);

  Object.entries(scenarioFiles[screenId]).forEach(([label, path]) => {
    div.appendChild(createRadio(screenId, label, path));
  });

  aanloopContainer.appendChild(div);
});

// ===============================
// PRESETS
// ===============================
fetch("/layout.json")
  .then(r => r.json())
  .then(layout => {
    const platielContainer = document.getElementById("platielstraat-buttons");
    const koestraatContainer = document.getElementById("koestraat-buttons");

    layout.presets.forEach(preset => {
      const btn = document.createElement("button");
      btn.textContent = preset.name;
      btn.onclick = () => {
        Object.entries(preset.screens).forEach(([screen, src]) => {
          setImage(screen, src);
          // update radio buttons automatisch
          const radios = document.getElementsByName(screen);
          radios.forEach(radio => { radio.checked = radio.value === src; });
        });
      };

      if(preset.name.toLowerCase().includes("platielstraat")) {
        platielContainer.appendChild(btn);
      } else if(preset.name.toLowerCase().includes("koestraat")) {
        koestraatContainer.appendChild(btn);
      }
    });
  });
</script>

</body>
</html>
